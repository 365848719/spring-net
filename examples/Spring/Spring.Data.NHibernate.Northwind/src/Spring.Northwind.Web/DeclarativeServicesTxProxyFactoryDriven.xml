<?xml version="1.0" encoding="utf-8" ?>
<objects xmlns="http://www.springframework.net">

  <description>
    Transactional Proxy for FulfillmentService using the TransactionProxyFactory
  </description>
  
  
  <!-- Note if you have many of these objects with similar configuration use -->
  <!-- an abstract parent object to encapsulate common settings              -->

  <object id="TxProxyConfigurationTemplate" abstract="true"
          type="Spring.Transaction.Interceptor.TransactionProxyFactoryObject, Spring.Data">
    
    <property name="PlatformTransactionManager" ref="HibernateTransactionManager"/>

    <property name="TransactionAttributes">
      <name-values>
        <!-- Add common methods across your services here -->
        <add key="Process*" value="PROPAGATION_REQUIRED"/>
        <!--
        <add key="Delete*" value="PROPAGATION_REQUIRED"/>
        -->
      </name-values>
    </property>
    <!-- note you can use alias names so that this configuration file is -->
    <!-- not dependent on the precise object name of the logging advice  -->
    <!-- defined in Aspects.xml                                          -->
    <property name="PreInterceptors" ref="CommonLoggingAroundAdvice"/>
  </object>


  <object id="FulfillmentServiceUsingTxPFO" parent="TxProxyConfigurationTemplate">

    <!-- Note: would likely use an anonymous inner object instead of a reference -->
    <!-- to ensure that no one can access an unadvised object -->
    <property name="Target" ref="FulfillmentService"/>

  </object>
</objects>

<?xml version="1.0"?>
<project name="Spring.Services.WindowsService.Process" default="build">
<!--
    Required properties:
      * current.bin.dir           - (path) root level to build to
      * current.build.debug       - (true|false) debug build?
      * current.build.defines.csc - framework-specific build defines for C# compiler
-->
   <target name="build">
        <csc target="exe" define="${current.build.defines.csc}" 
             warnaserror="false"
             debug="${current.build.debug}" 
             win32icon="../../../icons/spring.ico"
             output="${current.bin.dir}/${project::get-name()}.exe" 
             doc="${current.bin.dir}/${project::get-name()}.xml">
	<arg line="${compiler.args}"/>
        <nowarn>
          <warning number="${nowarn.numbers}" />
        </nowarn>
         <sources failonempty="true">
            <include name="WindowsService/Process/**/*.cs" />
            <include name="../CommonAssemblyInfo.cs" />
         </sources>
         <references basedir="${current.bin.dir}">
            <include name="*.dll"/>
            <exclude name="${project::get-name()}.dll"/>
         </references>
        </csc>
        <copy todir="${current.bin.dir}" overwrite="true">
          <fileset basedir="WindowsService/Process">
            <include name="service-process-definition.xml"/>
          </fileset>
        </copy>
        <copy tofile="${current.bin.dir}/${project::get-name()}.exe.config" 
            file="App.config" overwrite="true">
        </copy>
   </target>
    
</project>

